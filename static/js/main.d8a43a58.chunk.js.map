{"version":3,"sources":["services/same-day.ts","services/storage.ts","services/periodManger.ts","views/calendar/Calendar.view.tsx","views/stats/Stats.view.tsx","App.tsx","reportWebVitals.ts","index.tsx","views/calendar/calendar.module.scss"],"names":["isSameDay","date1","date2","getDate","getMonth","getFullYear","localforage","setDriver","INDEXEDDB","LOCALSTORAGE","storage","load","key","a","getItem","save","data","setItem","remove","removeItem","PeriodManager","managerId","periods","id","loadPeriodsFromStorage","then","emitChange","this","savePeriodsToStorage","emit","date","remark","existingPeriod","getPeriod","newPeriod","push","period","splice","indexOf","forEach","p","EventEmitter","CalendarView","useState","setPeriods","selectedDate","setSelectedDate","create","periodManager","modalOpen","setModalOpen","useEffect","handlePeriodsChange","periodDates","map","on","off","className","styles","container","onChange","value","Date","tileClassName","view","some","isOpen","modal","overlayClassName","overlay","card","body","dateToggle_container","label","getDay","toggle","defaultChecked","e","target","checked","addPeriod","removePeriod","actions","onClick","undefined","Stats","sort","b","getTime","periodListJsx","toDateString","toString","Modal","setAppElement","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.d8a43a58.chunk.js","sourcesContent":["//check if two dates are the same day\r\nexport function isSameDay(date1: Date, date2: Date) {\r\n    return (\r\n        date1.getDate() === date2.getDate() &&\r\n        date1.getMonth() === date2.getMonth() &&\r\n        date1.getFullYear() === date2.getFullYear()\r\n    );\r\n}\r\n","import localforage from \"localforage\";\r\nlocalforage.setDriver([localforage.INDEXEDDB, localforage.LOCALSTORAGE]);\r\nconst load = async <T>(key: string): Promise<T | null> => {\r\n    return localforage.getItem(key);\r\n};\r\n\r\nconst save = (key: string, data: { [key: string]: any }) => {\r\n    return localforage.setItem(key, data);\r\n};\r\n\r\nconst remove = (key: string) => {\r\n    return localforage.removeItem(key);\r\n};\r\n\r\nexport const storage = {\r\n    load,\r\n    save,\r\n    remove\r\n};\r\n","import { isSameDay } from \"./same-day\";\r\nimport EventEmitter from \"events\";\r\nimport { storage } from \"./storage\";\r\n\r\nexport type Period = {\r\n    date: Date;\r\n    remark: string;\r\n};\r\n\r\n// A class that manages the period objects\r\nexport class PeriodManager extends EventEmitter {\r\n    private periods: Period[];\r\n    private id: string;\r\n    constructor(managerId: string) {\r\n        super();\r\n        this.periods = [];\r\n        this.id = managerId;\r\n        this.loadPeriodsFromStorage(this.id).then((periods) => {\r\n            if (periods) {\r\n                this.periods = periods;\r\n                this.emitChange();\r\n            }\r\n        });\r\n    }\r\n\r\n    private emitChange() {\r\n        this.savePeriodsToStorage(this.periods);\r\n        this.emit(\"change\", this.periods);\r\n    }\r\n\r\n    // load periods array from the storage and add it to periods array\r\n    private loadPeriodsFromStorage(id: string) {\r\n        return storage.load<Period[]>(id);\r\n    }\r\n\r\n    // save periods array to storage\r\n    public savePeriodsToStorage(periods: Period[]): void {\r\n        storage.save(this.id, periods);\r\n    }\r\n\r\n    // Adds a period to the manager\r\n    public addPeriod(date: Date, remark: string): void {\r\n        // get period for the date if present\r\n        let existingPeriod = this.getPeriod(date);\r\n        // if period is not present\r\n        // - create a new period and add to the list otherwise update the existing period\r\n        if (!existingPeriod) {\r\n            let newPeriod = {\r\n                date: date,\r\n                remark: remark\r\n            };\r\n            this.periods.push(newPeriod);\r\n            this.emitChange();\r\n        } else {\r\n            existingPeriod.remark = remark;\r\n            this.emitChange();\r\n        }\r\n    }\r\n\r\n    // update the period remark\r\n    public updatePeriod(date: Date, remark: string): void {\r\n        let period = this.getPeriod(date);\r\n        if (period) {\r\n            period.remark = remark;\r\n            this.emitChange();\r\n        }\r\n    }\r\n\r\n    // remove period from the manager if exists\r\n    public removePeriod(date: Date): void {\r\n        let period = this.getPeriod(date);\r\n        if (period) {\r\n            this.periods.splice(this.periods.indexOf(period), 1);\r\n            this.emitChange();\r\n        }\r\n    }\r\n\r\n    // Returns the period by the date else return null\r\n    public getPeriod(date: Date): Period | null {\r\n        let period: Period | null = null;\r\n        this.periods.forEach((p) => {\r\n            if (isSameDay(p.date, date)) {\r\n                period = p;\r\n            }\r\n        });\r\n        return period;\r\n    }\r\n\r\n    // Returns the periods array\r\n    public getPeriods(): Period[] {\r\n        return this.periods;\r\n    }\r\n\r\n    // create an instance of the PeriodManager\r\n    public static create(id: string): PeriodManager {\r\n        return new PeriodManager(id);\r\n    }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Calendar from \"react-calendar\";\r\nimport \"./calendar.scss\";\r\nimport styles from \"./calendar.module.scss\";\r\nimport { isSameDay } from \"../../services/same-day\";\r\nimport Modal from \"react-modal\";\r\nimport Toggle from \"react-toggle\";\r\nimport { Period, PeriodManager } from \"../../services/periodManger\";\r\n\r\nModal.setAppElement(\"#root\");\r\n\r\nexport function CalendarView() {\r\n    const [periods, setPeriods] = useState<Period[]>([]);\r\n    const [selectedDate, setSelectedDate] = useState<Date>();\r\n    const [periodManager] = useState(() =>\r\n        PeriodManager.create(\"period_manager\")\r\n    );\r\n\r\n    const [modalOpen, setModalOpen] = useState(false);\r\n\r\n    // hook to attach event handlers for periods\r\n    useEffect(() => {\r\n        const handlePeriodsChange = (periods: Period[]) => {\r\n            const periodDates = periods.map((period) => ({ ...period }));\r\n            setPeriods(periodDates);\r\n        };\r\n        periodManager.on(\"change\", handlePeriodsChange);\r\n        return () => {\r\n            periodManager.off(\"change\", handlePeriodsChange);\r\n        };\r\n    }, [periodManager]);\r\n\r\n    const openModal = (date: Date) => {\r\n        setSelectedDate(date);\r\n        setModalOpen(true);\r\n    };\r\n\r\n    const closeModal = () => {\r\n        setSelectedDate(undefined);\r\n        setModalOpen(false);\r\n    };\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <Calendar\r\n                onChange={(selectedDate: Date) => {\r\n                    return openModal(selectedDate);\r\n                }}\r\n                value={new Date()}\r\n                tileClassName={({ date, view }) => {\r\n                    if (view === \"month\") {\r\n                        const match = periods.some((period) =>\r\n                            isSameDay(date, period.date)\r\n                        );\r\n                        return match ? styles.periods : \"\";\r\n                    }\r\n                    return \"\";\r\n                }}\r\n            />\r\n            {selectedDate && (\r\n                <Modal\r\n                    isOpen={modalOpen}\r\n                    className={styles.modal}\r\n                    overlayClassName={styles.overlay}\r\n                >\r\n                    <div className={styles.card}>\r\n                        <div className={styles.body}>\r\n                            <label className={styles.dateToggle_container}>\r\n                                <span className={styles.label}>{`${new Date(\r\n                                    selectedDate\r\n                                ).getDay()}-${\r\n                                    new Date(selectedDate).getMonth() + 1\r\n                                }-${new Date(\r\n                                    selectedDate\r\n                                ).getFullYear()}`}</span>\r\n                                <Toggle\r\n                                    className={styles.toggle}\r\n                                    defaultChecked={periods.some((period) =>\r\n                                        isSameDay(selectedDate, period.date)\r\n                                    )}\r\n                                    onChange={(e) => {\r\n                                        const selected = e.target.checked;\r\n\r\n                                        if (selected) {\r\n                                            periodManager.addPeriod(\r\n                                                selectedDate,\r\n                                                \"\"\r\n                                            );\r\n                                        } else {\r\n                                            periodManager.removePeriod(\r\n                                                selectedDate\r\n                                            );\r\n                                        }\r\n                                    }}\r\n                                />\r\n                            </label>\r\n                        </div>\r\n                        <div className={styles.actions}>\r\n                            <button onClick={closeModal}>Close</button>\r\n                        </div>\r\n                    </div>\r\n                </Modal>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Period, PeriodManager } from \"../../services/periodManger\";\r\n\r\nexport function Stats() {\r\n    const [periods, setPeriods] = useState<Period[]>([]);\r\n    const [periodManager] = useState(() =>\r\n        PeriodManager.create(\"period_manager\")\r\n    );\r\n    // hook to attach event handlers for periods\r\n    useEffect(() => {\r\n        const handlePeriodsChange = (periods: Period[]) => {\r\n            const periodDates = periods.map((period) => ({ ...period }));\r\n            periodDates.sort((a, b) => a.date.getTime() - b.date.getTime());\r\n            setPeriods(periodDates);\r\n        };\r\n        periodManager.on(\"change\", handlePeriodsChange);\r\n        return () => {\r\n            periodManager.off(\"change\", handlePeriodsChange);\r\n        };\r\n    }, [periodManager]);\r\n\r\n    const periodListJsx = periods.map((period) => {\r\n        return (\r\n            <div key={period.date.toString()}>\r\n                <li>{period.date.toDateString()}</li>\r\n            </div>\r\n        );\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            <ul>{periodListJsx}</ul>\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\nimport \"./App.css\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { CalendarView } from \"./views/calendar/Calendar.view\";\nimport { Stats } from \"./views/stats/Stats.view\";\n\nfunction App() {\n    return (\n        <div>\n            <Switch>\n                <Route path=\"/\" exact>\n                    <CalendarView />\n                </Route>\n                <Route path=\"/stats\">\n                    <Stats />\n                </Route>\n            </Switch>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"react-toggle/style.css\"\n\nReactDOM.render(\n    <React.StrictMode>\n        <BrowserRouter>\n            <App />\n        </BrowserRouter>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"calendar_container__1Uxar\",\"periods\":\"calendar_periods__K_AYZ\",\"modal\":\"calendar_modal__13pdY\",\"overlay\":\"calendar_overlay__DLRUi\",\"dateToggle_container\":\"calendar_dateToggle_container__3Xcbd\",\"label\":\"calendar_label__3kSYl\",\"card\":\"calendar_card__1-GUN\",\"body\":\"calendar_body__1lFIH\",\"actions\":\"calendar_actions__3MsVj\"};"],"sourceRoot":""}