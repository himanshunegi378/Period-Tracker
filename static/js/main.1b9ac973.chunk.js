(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(16),c=n.n(i),o=(n(41),n(42),n(3)),s=n(12),d=n(9),u=n(34),l=(n(43),n(8)),f=n.n(l);function h(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var g=n(18),j=n.n(g),v=n(28),b=n.n(v),p=n(29),m=n(30),O=n(36),_=n(35),x=n(31),k=n.n(x),y=n(19),D=n.n(y),P=n(32),S=n(11),C=n.n(S);C.a.setDriver([C.a.INDEXEDDB,C.a.LOCALSTORAGE]);var T={load:function(){var e=Object(P.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.a.getItem(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),save:function(e,t){return C.a.setItem(e,t)},remove:function(e){return C.a.removeItem(e)}},N=function(e){Object(O.a)(n,e);var t=Object(_.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this)).periods=void 0,a.id=void 0,a.getTimeDiff=function(e){var t=[];if(e.length<=1)return[];for(var n=1;n<e.length;n++){var a=e[n],r=e[n-1],i=a.date.getTime()-r.date.getTime(),c=Math.floor(i/864e5);t.push(c)}return t},a.periods=[],a.id=e,a.loadPeriodsFromStorage(a.id).then((function(e){e&&(a.periods=e,a.emitChange())})),a}return Object(m.a)(n,[{key:"emitChange",value:function(){this.savePeriodsToStorage(this.periods),this.emit("change",this.periods)}},{key:"loadPeriodsFromStorage",value:function(e){return T.load(e)}},{key:"savePeriodsToStorage",value:function(e){T.save(this.id,e)}},{key:"addPeriod",value:function(e,t){var n=this.getPeriod(e);if(n)n.remark=t,this.emitChange();else{for(var a={date:e,remark:t},r=0,i=0;i<this.periods.length;i++){if(r=i,this.periods[i].date.getTime()>e.getTime())break;r=i+1}this.periods.splice(r,0,a),this.emitChange()}}},{key:"updatePeriod",value:function(e,t){var n=this.getPeriod(e);n&&(n.remark=t,this.emitChange())}},{key:"removePeriod",value:function(e){var t=this.getPeriod(e);t&&(this.periods.splice(this.periods.indexOf(t),1),this.emitChange())}},{key:"getPeriod",value:function(e){var t=null;return this.periods.forEach((function(n){h(n.date,e)&&(t=n)})),t}},{key:"predictNextPeriod",value:function(){var e=this.getTimeDiff(this.periods),t=e.reduce((function(e,t){return e+t}),0)/e.length;return new Date(this.periods[this.periods.length-1].date.getTime()+24*t*60*60*1e3)}},{key:"getPeriods",value:function(){return this.periods}}],[{key:"create",value:function(e){return new n(e)}}]),n}(k.a),w=n(2);function E(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(),c=Object(d.a)(i,2),o=c[0],l=c[1],g=Object(a.useState)(null),v=Object(d.a)(g,2),p=v[0],m=v[1],O=Object(a.useState)((function(){return N.create("period_manager")})),_=Object(d.a)(O,1)[0],x=Object(a.useState)(!1),k=Object(d.a)(x,2),y=k[0],D=k[1];Object(a.useEffect)((function(){var e=function(e){var t=e.map((function(e){return Object(s.a)({},e)}));r(t),m(_.predictNextPeriod())};return _.on("change",e),function(){_.off("change",e)}}),[_]);return Object(w.jsxs)("div",{className:f.a.container,children:[Object(w.jsx)(u.a,{onChange:function(e){return l(e),void D(!0)},value:new Date,tileClassName:function(e){var t=e.date;if("month"===e.view){if(n.some((function(e){return h(t,e.date)})))return f.a.periods;if(p&&h(t,p))return f.a.prediction}return""}}),o&&Object(w.jsx)(j.a,{isOpen:y,className:f.a.modal,overlayClassName:f.a.overlay,children:Object(w.jsxs)("div",{className:f.a.card,children:[Object(w.jsx)("div",{className:f.a.body,children:Object(w.jsxs)("label",{className:f.a.dateToggle_container,children:[Object(w.jsx)("span",{className:f.a.label,children:"".concat(new Date(o).getDay(),"-").concat(new Date(o).getMonth()+1,"-").concat(new Date(o).getFullYear())}),Object(w.jsx)(b.a,{className:f.a.toggle,defaultChecked:n.some((function(e){return h(o,e.date)})),onChange:function(e){e.target.checked?_.addPeriod(o,""):_.removePeriod(o)}})]})}),Object(w.jsx)("div",{className:f.a.actions,children:Object(w.jsx)("button",{onClick:function(){l(void 0),D(!1)},children:"Close"})})]})})]})}function F(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)((function(){return N.create("period_manager")})),c=Object(d.a)(i,1)[0];Object(a.useEffect)((function(){var e=function(e){var t=e.map((function(e){return Object(s.a)({},e)}));r(t)};return c.on("change",e),function(){c.off("change",e)}}),[c]),Object(a.useEffect)((function(){if(0!==n.length){var e=o(n);n.forEach((function(t,n){console.log(t.date.toDateString()),console.log(e[n])})),console.log("Next period prediction: ".concat(c.predictNextPeriod().toDateString()))}}),[c,n]);var o=function(e){var t=[];if(e.length<=1)return[];for(var n=1;n<e.length;n++){var a=e[n],r=e[n-1],i=a.date.getTime()-r.date.getTime(),c=Math.floor(i/864e5);t.push(c)}return t},u=n.map((function(e){return Object(w.jsx)("div",{children:Object(w.jsx)("li",{children:e.date.toDateString()})},e.date.toString())}));return Object(w.jsx)("div",{children:Object(w.jsx)("ul",{children:u})})}j.a.setAppElement("#root");var I=function(){return Object(w.jsx)("div",{children:Object(w.jsxs)(o.c,{children:[Object(w.jsx)(o.a,{path:"/",exact:!0,children:Object(w.jsx)(E,{})}),Object(w.jsx)(o.a,{path:"/stats",children:Object(w.jsx)(F,{})})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,65)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))},Y=n(17);n(63);c.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(Y.a,{children:Object(w.jsx)(I,{})})}),document.getElementById("root")),M()},8:function(e,t,n){e.exports={container:"calendar_container__1Uxar",periods:"calendar_periods__K_AYZ",prediction:"calendar_prediction__1eG1C",modal:"calendar_modal__13pdY",overlay:"calendar_overlay__DLRUi",dateToggle_container:"calendar_dateToggle_container__3Xcbd",label:"calendar_label__3kSYl",card:"calendar_card__1-GUN",body:"calendar_body__1lFIH",actions:"calendar_actions__3MsVj"}}},[[64,1,2]]]);
//# sourceMappingURL=main.1b9ac973.chunk.js.map